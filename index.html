<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div class="app">
        <p>为什么要做数据劫持</p>
        <p>- 观察对象，给对象增加Object.defineProerty</p>
        <p>- vue特点是不能新增不存在的属性，不存在的属性没有get和set</p>
        <p>- 深度响应，因为每次赋予一个新对象时会给这个新对象增加defineProperty（数据劫持）</p>
        <p>为什么要做数据代理</p>
        <p>- 数据代理就是让我们每次不用写一长串，如vm._data.a.b,直接vm.a.b就可以了</p>
        <p>数据编译就是把{{}}里内容解析出来</p>
        <p>数据可以进行编译后，但是我们手动修改后的数据并没有在页面上发生改变，这时候我们需要用到发布订阅模式</p>
        <p>发布订阅主要靠的就是数组关系，订阅就是放入函数，发布就是让数组里的函数执行</p>
        <p>现在我们订阅一个事件，当数据改变需要重新刷新视图，这就需要在replace替换的逻辑里处理</p>
        <p>通过new Watcher把数据订阅一下，数据一变就执行改变内容的操作</p>
        <p>dep,watcher,complier是实现mvvm策略的核心</p>
        <p>{{a}}</p>
        <p>{{b.c}}</p>
        <p>计算属性{{d}}</p>
    </div>
    <script src="./mvvm.js"></script>
    <script type="text/javascript">
        window.mvvm = new Mvvm({
            el: '.app',
            data: {
                a: 1,
                b: {
                    c: 2
                },
            },
            mounted() {
                console.log('mounted钩子函数')
            },
            computed: {
                d() {
                    return this.a + this.b.c
                }
            }
        })
    </script>
</body>

</html>